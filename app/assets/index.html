<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Vermont Atlas of Life Data Explorer"/>
    <meta name="author" content="Vermont Center for Ecostudies">
    <title>Vermont Atlas of Life Data Explorer</title>
    HEADLOCAL_HERE
    HEAD_HERE
  </head>
  <body>
    BANNER_HERE
    <!-- main content -->
    <div id="main_content" class="la-content container">
      <a name="top"></a>
      
      <div class="jumbotron">
        <h1 data-i18n="general.orgfullname"></h1>
        <p data-i18n="index.slogan"></p>
      </div>

      <div class="row">
        <div class="col-md-4">
          <div class="list-group">
            <a href="::biocacheURL::" class="list-group-item">
              <h4 class="list-group-item-heading" data-i18n="index.stats.occurrences"></h4>
              <p class="list-group-item-text" id="stats_occurrences"></p>
            </a>
          </div>
          <div class="list-group">
            <a href="::datasetsURL::" class="list-group-item">
              <h4 class="list-group-item-heading" data-i18n="index.stats.datasets"></h4>
              <p class="list-group-item-text" id="stats_datasets"></p>
            </a>
          </div>
        </div>

        <div class="col-md-4"> <!-- taxa roulette wheel from Georg Neubauer -->
		<div id="div_spinID" onmouseover="" style="cursor: pointer; width: fit-content">
		    <img title="Taxa Wheel by Georg Neubauer - Austria" onclick="func_proc()" id="animation" src="https://vtatlasoflife.org/basic-brand-2020/images/spinthewheel_draft-007.gif" style="height: 300px; width: 300px;max-height:310px; max-width:310px; margin:10px 10px 10px 10px;"/>
		</div> <!-- end taxa wheel -->
	</div>

        <div class="col-md-4">
          <div class="list-group">
            <a href="::collectoryURL::" class="list-group-item">
              <h4 class="list-group-item-heading" data-i18n="index.stats.institutions"></h4>
              <p class="list-group-item-text" id="stats_institutions"></p>
            </a>
          </div>
          <div class="list-group">
            <a href="::bieURL::" class="list-group-item">
              <h4 class="list-group-item-heading" data-i18n="index.stats.species"></h4>
              <p class="list-group-item-text" id="stats_species"></p>
            </a>
          </div>
        </div>
      </div>

      <div class="list-group">
        <form method="get" action="::searchServer::::searchPath::" class="search-form" id="main_biosearch_form" action="#">
          <div class="input-group">
            <div class="form-group is-empty">
              <input data-i18n="[placeholder]nav.searchbox" id="search" class="form-control ac_input general-search ui-autocomplete-input" name="q" type="text"  autocomplete="off">
            </div>
            <span id="main_biosearch_label" class="input-group-btn">
              <div class="form-group"><input data-i18n="[value]index.search-btn" type="submit" class="form-control btn btn-raised btn-primary" alt="Search" value=""></div>
            </span>
          </div>
        </form>
      </div>
    </div>
    FOOTER_HERE
    <!-- TODO maybe move this to footer  -->
	<script type="application/javascript">
	func_proc = function() {
		document.getElementById("animation").src="https://vtatlasoflife.org/basic-brand-2020/images/spinthewheel_test1.gif";
		setTimeout(function() {
			var rnd = Math.floor((Math.random() * 5000000) + 1000000);
			var URL="https://biocache-ws.biodiversityatlas.at/occurrences/taxon/" + rnd;
			for(var it_0 = 0; it_0 <= 600; it_0++) {
			    if(func_rnd(URL, rnd) === 1) {
				break;
			    } else {
				rnd = Math.floor((Math.random() * 5000000) + 1000000);
				URL = "https://biocache-ws.vtatlasoflife.org/occurrences/taxon/" + rnd;
			    }
			}
		},1500);
	    }
	func_rnd = function(URL, rnd) {
		$.ajax({
		    url: URL,
		    type: 'GET',
		    success: function (resp) {
		       if (resp["totalRecords"] > 0) {
			    location.href = "https://bie.vtatlasoflife.org/species/" + rnd;
			    return 1;
			} else {
			    return 0;
			}
		    },
		    error: function(e) {
			//alert('Error: '+e);
		    }
		});
	}
	</script>
  </body>
</html>
